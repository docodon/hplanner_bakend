"use strict";angular.module("hplannerFrontendApp",["ngAnimate","ngAria","ngCookies","ngMessages","ngResource","ngRoute","ngSanitize","ngTouch","ngMaterial","mwl.calendar","ui.bootstrap","multipleDatePicker","config"]).config(["$routeProvider","$httpProvider","$mdThemingProvider",function(a,b,c){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"main"}).when("/recommendations",{templateUrl:"views/recommendations.html",controller:"RecommendCtrl",controllerAs:"recommend"}).otherwise({redirectTo:"/"}),b.defaults.useXDomain=!0,delete b.defaults.headers.common["X-Requested-With"]}]),angular.module("config",[]).constant("ENV",{name:"development",apiEndpoint:"http://secure-atoll-63871.herokuapp.com"}),angular.module("hplannerFrontendApp").service("HolidayListService",["$http","ENV",function(a,b){this.dates=function(){return a.get(b.apiEndpoint+"/api/leaves.json").then(function(a){return a.data},function(a){return-1})}}]),angular.module("hplannerFrontendApp").service("UserPreferenceService",["$http","ENV",function(a,b){this.recommendations={api_recommendations:-1},this.plans=function(e,f){return e.holiday_list=c(e.holiday_list),e.date_from=d(e.date_from),a.post(b.apiEndpoint+"/api/leaves/gen_plan.json",e).then(function(a){return f.api_recommendations=a.data,a.data},function(a){return-1})};var c=function(a){for(var b=0;b<a.length;b++)a[b]=d(a[b]);return a},d=function(a){return a.format("YYYY-MM-DD")}}]),angular.module("hplannerFrontendApp").controller("MainCtrl",["HolidayListService","UserPreferenceService","$scope","$location","$interval",function(a,b,c,d,e){var f=a.dates();f.then(function(a){var b=a.holiday_list;if(c.circle=0,c.fmonth=0,c.submited=!1,c.submit_form={holiday_list:[],leaves:0},-1===b)c.submit_form.date_from=moment.now(),c.submit_form.date_to=moment.now()+365;else{for(var d=0;d<b.length;d++)c.submit_form.holiday_list.push(moment(b[d]));c.submit_form.date_from=moment(a.date_from),c.submit_form.date_to=moment(a.date_to)}});for(var g=[],h=moment(c.date_from),i=moment(h).add(366,"d");i>h;h.add(1,"month"))g.push(moment(h));c.months=g,c.change_fmonth=function(a){c.fmonth=a},c.submit=function(){e(function(){c.circle+=1,c.circle>100&&(c.circle=30)},100),c.submited=!0,b.plans(c.submit_form,b.recommendations).then(function(a){d.path("/recommendations")},function(a){d.path("/")})},c.getNumber=function(a){12===c.fmonth&&(a=1);for(var b=[],d=0;a>d;d++)b.push(d);return b}}]),angular.module("hplannerFrontendApp").controller("RecommendCtrl",["UserPreferenceService","$scope","$location","$mdSidenav",function(a,b,c,d){var e=a.recommendations.api_recommendations;-1===e&&c.path("/"),b.date_from=moment(e.date_from),b.date_to=moment(b.date_from).add(365,"days"),b.rnumber=0;var f=e.response;b.recommendations=[];for(var g=0;g<f.length;g++){var h={id:g};h.fitness_score=f[g].fitness_score,h.plan=[];for(var i=0;i<f[g].array.length;i++)"workday"!==f[g].array[i][1]&&h.plan.push(moment(f[g].array[i][0]));b.recommendations.push(h)}b.disableClick=function(a){a.preventDefault()};for(var j=[],k=moment(b.date_from),l=moment(k).add(550,"d");l>k;k.add(1,"month"))j.push(moment(k));b.months=j,b.getNumber=function(a){for(var b=[],c=0;a>c;c++)b.push(c);return b},b.change_rnumber=function(a){b.rnumber=a},b.changeRnumberSidenav=function(a){b.rnumber=a,d("left").close()},b.openSideNavPanel=function(){d("left").open()},b.closeSideNavPanel=function(){d("left").close()}}]),angular.module("hplannerFrontendApp").run(["$templateCache",function(a){a.put("views/main.html",'<div flex class="padding-left-5 padding-right-5 padding-bottom-2"> <md-nav-bar hide-xs md-selected-nav-item="currentNavItem" nav-bar-aria-label="navigation links"> <md-nav-item md-nav-click="change_fmonth(0)" name="page1">1-4</md-nav-item> <md-nav-item md-nav-click="change_fmonth(4)" name="page2">5-8</md-nav-item> <md-nav-item md-nav-click="change_fmonth(8)" name="page3">9-12</md-nav-item> <md-nav-item md-nav-click="change_fmonth(12)" name="page4">13-13</md-nav-item> </md-nav-bar> <multiple-date-picker ng-model="submit_form.holiday_list" disable-days-before="submit_form.date_from" disable-days-after="submit_form.date_to" month="months[fmonth+i]" disable-navigation="true" hide> </multiple-date-picker> <form ng-submit="submit()" novalidate> <md-input-container class="md-block"> <div class="padding-bottom-2"> <label class="font-10"> Select prefered dates * </label> </div> <div flex layout="row" hide-xs style="top-padding: 5%"> <div ng-repeat="i  in getNumber(4)"> <div flex class="padding-left-3 padding-right-3 padding-bottom-7"> <multiple-date-picker ng-model="submit_form.holiday_list" disable-days-before="submit_form.date_from" disable-days-after="submit_form.date_to" month="months[fmonth+i]" disable-navigation="true"> </multiple-date-picker> </div> </div> </div> <div flex layout="column" hide-gt-xs class="padding-top-8"> <div ng-repeat="i  in getNumber(13)"> <div flex class="padding-left-3 padding-right-3 padding-bottom-7"> <multiple-date-picker ng-model="submit_form.holiday_list" disable-days-before="submit_form.date_from" disable-days-after="submit_form.date_to" month="months[fmonth+i]" disable-navigation="true"> </multiple-date-picker> </div> </div> </div> </md-input-container> <md-input-container class="md-block"> <label> Prefered number of leaves this year </label> <input required type="number" ng-model="submit_form.leaves" min="0"> </md-input-container> <div layout="row"> <md-button class="md-primary" flex="60" type="submit" ng-click="plans_resp()" ng-disabled="submited">Generate Plans</md-button> <!-- 	    <md-button   class="md-primary md-hue-1" >Generate Plans</md-button>\n --> <md-progress-circular flex align="center" md-mode="determinate" value="{{circle}}"></md-progress-circular> </div> </form> </div>'),a.put("views/recommendations.html",'<div layout="column" flex class="padding-left-5 padding-right-5 padding-bottom-5"> <md-nav-bar hide-xs md-selected-nav-item="currentNavItem" nav-bar-aria-label="navigation links"> <md-nav-item class="padding-left-5" md-nav-click="change_rnumber(0)" name="page1">r1</md-nav-item> <md-nav-item md-nav-click="change_rnumber(1)" name="page2">r2</md-nav-item> <md-nav-item md-nav-click="change_rnumber(2)" name="page3">r3</md-nav-item> <md-nav-item md-nav-click="change_rnumber(3)" name="page4">r4</md-nav-item> </md-nav-bar> <div hide-gt-xs layout="row"> <span flex="80"></span> <md-button flex class="md-icon-button md-primary icon-1" aria-label="Settings" ng-click="openSideNavPanel()"> <md-icon md-svg-icon="images/icons/menu.de12d65d.svg"></md-icon> </md-button> </div> <md-sidenav hide-gt-xs class="md-sidenav-left md-whiteframe-z2" md-component-id="left"> <md-toolbar layout="row"> <div class="md-toolbar-tools"> <h4> <span>Recommendations</span> </h4> <span flex></span> <md-button class="md-icon-button" aria-label="Close Side Panel" ng-click="closeSideNavPanel()"> <md-tooltip>Close Side Panel</md-tooltip> <md-icon class="small-icon" md-svg-icon="images/icons/cross.e5d31c39.svg"></md-icon> </md-button> </div> </md-toolbar> <md-list layout="column"> <md-button ng-repeat="i in getNumber(4)" flex class="md-primary" ng-click="changeRnumberSidenav(i)">recommendation {{i+1}}</md-button> </md-list> </md-sidenav> <div ng-repeat="i in getNumber(3)" layout="row" layout-xs="column" class="padding-left-1 padding-right-1"> <div class="padding-left-1 padding-right-1 padding-top-1" ng-repeat="j  in getNumber(5)"> <multiple-date-picker ng-model="recommendations[rnumber][\'plan\']" disable-days-before="date_from" disable-days-after="date_to" day-click="disableClick" month="months[i*5+j]" disable-navigation="true"> </multiple-date-picker> </div> </div> </div>')}]);